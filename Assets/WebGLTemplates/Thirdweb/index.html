<!DOCTYPE html>
<html lang="en-us">
<head>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Project Piano Tiles</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
</head>
<body class="dark">
    <div id="unity-container" class="unity-desktop">
        <canvas id="unity-canvas"></canvas>
    </div>
    <div id="loading-cover">
        <div id="unity-loading-bar">
            <div id="unity-logo"></div>
            <div id="unity-progress-bar-empty">
                <div id="unity-progress-bar-full"></div>
            </div>
            <div class="spinner"></div>
        </div>
    </div>
    <div id="unity-fullscreen-button" style="display: none"></div>

    <!-- Unity Loader -->
    <script src="Build/project piano tiles builds.loader.js"></script>

    <script>
      let unityInstance = null;

        window.onload = function () {
            const hideFullScreenButton = "";
            const buildUrl = "Build";
            const config = {
                dataUrl: buildUrl + "/project piano tiles builds.data",
                frameworkUrl: buildUrl + "/project piano tiles builds.framework.js",
                codeUrl: buildUrl + "/project piano tiles builds.wasm",
                streamingAssetsUrl: "StreamingAssets",
                companyName: "DefaultCompany",
                productName: "Project Piano Tiles",
                productVersion: "1.0",
            };

            const container = document.querySelector("#unity-container");
            const canvas = document.querySelector("#unity-canvas");
            const loadingCover = document.querySelector("#loading-cover");
            const progressBarEmpty = document.querySelector("#unity-progress-bar-empty");
            const progressBarFull = document.querySelector("#unity-progress-bar-full");
            const fullscreenButton = document.querySelector("#unity-fullscreen-button");
            const spinner = document.querySelector('.spinner');

            const canFullscreen = (function () {
                return !!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled);
            })();

            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                container.className = "unity-mobile";
                config.devicePixelRatio = 1;
            }

            loadingCover.style.display = "";

            createUnityInstance(canvas, config, (progress) => {
                spinner.style.display = "none";
                progressBarEmpty.style.display = "";
                progressBarFull.style.width = `${100 * progress}%`;
            }).then((unityInstance) => {
                loadingCover.style.display = "none";
                window.unityInstance = unityInstance;
                if (canFullscreen) {
                    if (!hideFullScreenButton) {
                        fullscreenButton.style.display = "";
                    }
                    fullscreenButton.onclick = () => {
                        document.documentElement.requestFullscreen();
                    };
                }
            }).catch((message) => {
                alert(message);
            });
        };
    </script>

    <!-- Firebase SDK -->
    <script type="module">
       // import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
        //import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-analytics.js";
        //import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";
        //import { getAuth } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAqYRzss6ZRPJNUEEeAfjoMpRQH5dg_i2w",
            authDomain: "project-piano-tiles.firebaseapp.com",
            databaseURL: "https://project-piano-tiles-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "project-piano-tiles",
            storageBucket: "project-piano-tiles.firebasestorage.app",
            messagingSenderId: "909790052967",
            appId: "1:909790052967:web:759a61fc05bbbe52784ac2",
            measurementId: "G-P03J1QQWFP"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        
        const database = firebase.database();
    </script>
</body>
</html>
